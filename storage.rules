rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Regra para a galeria de imagens
    // Permite que qualquer usuário autenticado faça o upload de imagens para a pasta 'gallery'.
    // A leitura das imagens é pública (qualquer um pode ver as imagens dos serviços/promoções).
    // Apenas administradores devem gerenciar os metadados no Firestore, mas o upload
    // pode ser permitido para usuários autenticados.
    match /gallery/{allPaths=**} {
      allow read;
      allow write: if request.auth != null;
    }
  }
}
